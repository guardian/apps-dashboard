<!doctype html>
<html lang="en">
  <head>
    <title>App Releases</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  </head>

  <body>
    <div class="container">

      <div class="row">
        <div class="col-md-3 offset-md-5">
          <div class="pb-2 mt-4 mb-2 border-bottom">
            <h3 class="text-muted">Releases</h3>
          </div>
        </div>
      </div>

    <div class="row">

      <div class="col-4">
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title">Android Production</h5>
            <p class="card-text">
              Version {{ releases.android.release.version }}<br>
              Released <span :data-livestamp="releases.android.release.date"></span><br>
              Date {{ moment(releases.android.release.date).format('ddd MMM D') }}</p> 
            <a :href="releases.android.release.download">Download</a>
          </div>
        </div>
      </div>

      <div class="col-4">
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title">iOS Production</h5>
            <p class="card-text">
              Version {{ releases.ios.production.version }}<br>
              Released <span :data-livestamp="releases.ios.production.releaseDate"></span><br>
              Date {{ moment(releases.ios.production.releaseDate).format('ddd MMM D') }}</p>
            <a :href="releases.android.alpha.download">Download</a>
          </div>
        </div>
      </div>

      <div class="col-4">
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title">Daily Edition</h5>
            <p class="card-text">
              Version {{ releases.dailyEdition.production.version }}<br>
              Released <span :data-livestamp="releases.dailyEdition.production.releaseDate"></span><br>
              Date {{ moment(releases.dailyEdition.production.releaseDate).format('ddd MMM D') }}</p>
            <a :href="releases.android.alpha.download">Download</a>            
          </div>
        </div>
      </div>
      
      </div>
      <div class="row">
      
        <div class="col-4">
          <div class="card mb-4">
            <div class="card-body">
              <h5 class="card-title">Android Beta</h5>
              <p class="card-text">
                Version {{ releases.android.beta.version }}<br>
                Released <span :data-livestamp="releases.android.beta.date"></span><br>
                Date {{ moment(releases.android.beta.date).format('ddd MMM D') }}</p> 
              <a :href="releases.android.beta.download">Download</a>
            </div>
          </div>
        </div>

        <div class="col-4">
          <div class="card mb-4">
            <div class="card-body">
              <h5 class="card-title">Android Alpha</h5>
              <p class="card-text">
                Version {{ releases.android.alpha.version }}<br>
                Released <span :data-livestamp="releases.android.alpha.date"></span><br>
                Date {{ moment(releases.android.alpha.date).format('ddd MMM D') }}</p> 
              <a :href="releases.android.alpha.download">Download</a>
            </div>
          </div>
        </div>

    </div>     
      
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/livestamp/1.1.2/livestamp.js"></script>
<script src="https://unpkg.com/vue@latest/dist/vue.js"></script>
<script>
  Vue.prototype.moment = moment
  
  new Vue({
  el: '.container',
  data: {
    releases:{"android":{"alpha":{"version":"","date":"","sha1":"","teamcity":"","github":""},
                         "release":{"version":"","date":"","sha1":"","teamcity":"","github":""},
                         "beta":{"version":"","date":"","sha1":"","teamcity":"","github":""}},
             "ios":{"production":{"version":"","date":"","sha1":"","teamcity":"","github":""}},
              "dailyEdition":{"production":{"version":"","releaseDate":"","sha1":"","teamcity":"","github":""}}
             }
  },
  created: function() {
    var that = this;


    $.get("https://s3-eu-west-1.amazonaws.com/release-archive-android-app/alpha.json", function(alpha) { that.releases.android.alpha = alpha });
    $.get("https://s3-eu-west-1.amazonaws.com/release-archive-android-app/beta.json", function(beta) { that.releases.android.beta = beta });
    $.get("https://s3-eu-west-1.amazonaws.com/release-archive-android-app/release.json", function(release) { that.releases.android.release = release });
    $.get("https://s3-eu-west-1.amazonaws.com/static-content-dist/ios/releases.json", function(ios) { that.releases.ios = Object.assign(that.releases.ios,ios) });
    $.get("https://s3-eu-west-1.amazonaws.com/static-content-dist/ios/releases-de.json", function(de) { that.releases.dailyEdition = Object.assign(that.releases.dailyEdition,de) });
  }
})

</script>

  </body>
</html>
